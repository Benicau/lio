<!DOCTYPE html>
<html>

<head>
    <title>Devis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        integrity="sha384-k6Rqe9/52mI/VYi9v/smhcC5Ce/NGp8D/jMj73SwcD3ZGdvdx5e9+6e9/l4zOG0" crossorigin="anonymous">
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .header {
            width: 100%;
            border-bottom: 2px solid  {{data.couleur.color}};
        }

        .header table {
            width: 100%;
        }

        .header table td {
            vertical-align: top;
        }

        .logo img {
            width: 80px;
            height: auto;
        }

        .logo h2,
        .logo p {
            margin: 0;
            font-size: 14px;
        }

        .info {
            text-align: right;
        }

        .info p {
            margin: 0;
            font-size: 11px;
            padding: 1px;
        }

        .info i {
            color:  {{data.couleur.color}};
            font-size: 12px;
        }

        .entete {
            margin-top: 10px;
        }

        .entete table {
            width: 100%;

        }

        span {
            color: {{data.couleur.color}};
            font-weight: bold;
        }

        /* Style des cellules du tableau */
        .entete td {

            vertical-align: top;
        }

        .entete td:last-child {
            width: 53%;
            text-align: right;
        }

        .entete p {
            margin: 0;
            font-size: 11px;
            padding: 5px;
        }

        .totaux {
            margin-top: 15px;
            page-break-inside: avoid;
        }

        .totaux p {
            margin: 0;
            font-size: 14px;
            padding: 3px;
            text-align: right;
        }

        .totaux .reserve {
            font-size: 10px;
            margin-top: 8px;
        }

        /* Style pour la division client-info */
        .client-info p {
            margin: 0;
            padding: 0;
            font-size: 14px;
        }

        /* Style des en-têtes */
        .entete h3 {
            margin-top: 0;
            padding: 0;
        }

        .visuel {
            margin-top: 35px;
            
        }

        .visuel thead {
            background-color:  {{data.couleur.color}};
            color: white;
            /* Couleur du texte */
            font-size: 13px;

        }

        .visuel th {
            padding: 2px 7px;
            /* Espacement interne */
            text-align: center
                /* Alignement du texte */
                border-bottom: 2px solid #ddd;
            /* Bordure du bas */
            font-size: 13px;
            font-weight: normal;
        }

        .visuel th:last-child {
            width: 60px;
        }

        .accompte {
            padding: 10px;
            border: 2px solid  {{data.couleur.color}};
            margin-top: 5px;
            page-break-inside: avoid;

        }

        .accompte p {
            margin: 0;
            padding: 0;
            font-size: 14px;
            text-align: center;
        }
        .signature{
            margin-top:25px;
            text-align: right;
            font-size: 14px;
            page-break-inside: avoid;

        }
        .date{
            background-color:  {{data.couleur.color}};
            width: 180px;
            height:30px;
        }
        .signe{
            background-color:  {{data.couleur.color}};
            width: 180px;
            height:30px;


        }
        .date tr {
            text-align: right;
        }
        .new-page {
            page-break-before: always;
        }
        .conditionV li{
            font-size: 15px;
            padding-bottom:15px;
           
        }
        .conditionV {
            font-size: 15px;
           
        }
        .conditionV h1{
              text-decoration: underline;
              text-align: center;
              font-size: 20px;
              padding-bottom:10px;

        }
         .ane{
            margin: 0;
            padding: 0;
            text-align:right;
            padding-top:4px;
            font-size: 13px;

        }
         .barre{
             background-color: {{data.couleur.color}};
              width:100%;
              height:1px;
              margin-top:10px;
        }
    </style>
</head>

<body>
    <div class="header">
        <table>
            <tr>
                <td>
                    <div class="logo">
                        {% if absolute_url(asset('uploads/logos/logo.png')) %}
                        <img src="{{ absolute_url(asset('uploads/logos/logo.png')) }}" alt="Company Logo" />
                        {% endif %}
                        {% if data.companyInfo.name %}
                        <h2>{{ data.companyInfo.name }}</h2>
                        {% endif %}
                        {% if data.companyInfo.slogan %}
                        <p>{{ data.companyInfo.slogan | raw }}</p>
                        {% endif %}
                    </div>
                </td>
                <td>
                    <div class="info">
                        {% if data.companyInfo.nom and data.companyInfo.prenom %}
                        <p>{{ data.companyInfo.nom }} {{ data.companyInfo.prenom }} <i class="fas fa-user"></i></p>
                        {% endif %}
                        {% if data.companyInfo.adress and data.companyInfo.codePostal and data.companyInfo.city and data.companyInfo.pays %}
                        <p>{{ data.companyInfo.adress }}, {{ data.companyInfo.codePostal }} {{ data.companyInfo.city }}
                            ({{ data.companyInfo.pays }}) <i class="fas fa-map-marker-alt"></i></p>
                        {% endif %}
                        {% if data.companyInfo.tvaNumber %}
                        <p>{{ data.companyInfo.tvaNumber }} <i class="fas fa-id-card"></i></p>
                        {% endif %}
                        {% if data.companyInfo.banque %}
                        <p>{{ data.companyInfo.banque }} <i class="fas fa-university"></i></p>
                        {% endif %}
                        {% if data.companyInfo.email %}
                        <p>{{ data.companyInfo.email }} <i class="fas fa-envelope"></i></p>
                        {% endif %}
                        {% if data.companyInfo.phone %}
                        <p>{{ data.companyInfo.phone }} <i class="fas fa-phone"></i></p>
                        {% endif %}
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div class="entete">
        <table>
            <tr>
                <td>
                    <p>Client:</p>
                </td>
                <td>
                    <div class="client-info">
                        {% if data.client.compagny %}
                        <p>{{ data.client.compagny }} </p>
                        {% endif %}
                        {% if data.client.name and data.client.surname %}
                        <p>{{ data.client.name }} {{ data.client.surname }} </p>
                        {% endif %}
                        {% if data.client.adress and data.client.numero %}
                        <p>{{ data.client.adress }} {{ data.client.numero }} </p>
                        {% endif %}
                        {% if data.client.codePostal and data.client.city and data.client.pays %}
                        <p>{{ data.client.codePostal }} {{ data.client.city }} ({{ data.client.pays }}) </p>
                        {% endif %}
                        {% if data.client.tva %}
                        <p>TVA: {{ data.client.tva }} </p>
                        {% endif %}
                    </div>
                </td>
                <td>
                    <h3>Devis</h3>
                    <p>Devis n&#186;: {{data.id}} </p>
                    <p>Date: {{ data.createdAt|date('d/m/Y') }}</p>
                    <p>Validité: <span>{{data.date}}</span></p>


                </td>
            </tr>

        </table>
    </div>
    <div class="visuel">
        <table>
            <thead>
                <tr>
                    <th>Quantité</th>
                    <th>Description</th>
                    <th>Catégories</th>
                    <th>Prix unitaire</th>
                    <th>Total (HTVA)</th>
                    <th>TVA ({{data.tauxTva}}%)</th>
                </tr>
            </thead>
            <tbody>
                {{ data.texte | raw }}
            </tbody>
        </table>
    </div>
    <div class="barre"></div>
    <div class="totaux">
        <p>Sous Total HT : {{ data.montantHorsTva|number_format(2, '.', ',') }} €</p>
        <p>Tva ({{data.tauxTva}}%) : {{ (data.tauxTva * data.montantHorsTva / 100)|number_format(2, '.', ',') }} €</p>
        <p>Montant total (TVAC) :
            <span>{{ ((data.tauxTva * data.montantHorsTva / 100)+ data.montantHorsTva)|number_format(2, '.', ',') }}
                €</span></p>
        <p class="reserve">Sous réserve de modification des prix par notre fournisseur</p>



    </div>
    <div class="accompte">
        <p>{{ ((data.accompte/((data.tauxTva * data.montantHorsTva / 100)+ data.montantHorsTva))*100)|number_format(0, '.', ',') }}%
            du montant sera demandé pour valider la commande soit : <span>{{ data.accompte|number_format(2, '.', ',') }}
                €</span></p>
        <p>A verser sur le compte <span>{{ data.companyInfo.banque }}</span></p>
        <p>avec la communication: <span>Devis n&#186;: {{data.id}} </span></p>
    </div>
    <div class="signature">
        <table>
            <tr>
                <td style="text-align: right;">
                    Date:
                </td>
                <td>
                    <div class="date"></div>
                </td>
            </tr>
            <tr >
                <td style="text-align: right; width: 513px;">
                    Signature pour accord:
                </td>
                <td>
                    <div class="signe"></div>
                </td>
            </tr>
        </table>
        <p class='ane'>Conditions générales en annexe</p>
    </div>
    <div class="new-page"></div>
    {% if data.tauxTva == 6 %}
    <div class="conditionV">
    {{data.tvatexte.texte | raw}}
    </div>
    <div class="new-page"></div>
    {% endif %}
    <div class="conditionV"> 
    {{data.condition.texte | raw}} 
    </div>

</body>

</html>